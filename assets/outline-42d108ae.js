function u({state:s,parent:l},{outer:r="#000000",inner:h="#ffffff",container:d="desktop"}){let{aspectRatio:e,scale:n,bitmap:a,pos:c,pan:p}=s,i=[e[0]*n,e[1]*n];const o=document.createElement("canvas");o.style.cssText="image-rendering: pixelated;",l[d].appendChild(o);function f(){const t=o.getContext("2d");t.clearRect(0,0,o.width,o.height),t.strokeStyle=h,t.strokeRect(c.x*i[0]+1.5,c.y*i[1]+1.5,i[0]-3,i[1]-3),t.strokeStyle=r,t.strokeRect(c.x*i[0]+.5,c.y*i[1]+.5,i[0]-1,i[1]-1)}function x(){o.width=a.width*e[0]*n,o.height=a.height*e[1]*n,o.style.transform=`translate(${p.x}px, ${p.y}px)`}return{syncState(t){(t.bitmap.width!=a.width||t.bitmap.height!=a.height||t.aspectRatio[0]!=e[0]||t.aspectRatio[1]!=e[1]||t.scale!=n||t.pos!=c)&&({aspectRatio:e,scale:n,pan:p,bitmap:a,pos:c}=t,i=[e[0]*n,e[1]*n],x(),f())}}}function m(s={}){return l=>u(l,s)}export{m as o};
